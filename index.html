<!DOCTYPE html>
<html>

<style>
    body,
    html {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0
    }

    .header {
        text-align: center;
    }

    .container {
        display: flex;
        width: 100%;
        height: 1816px;
        flex-direction: column;
        overflow: visible;
    }

    .poll {
        flex-grow: 1;
        border: none;
        margin: 0;
        padding: 0;
    }
</style>

<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>

<script>

    // Poll urls
    var url_pre = "https://docs.google.com/forms/d/e/";
    var url_post = "/viewform?embedded=true";
    var urls = [
        "1FAIpQLSd3PB2w5nEJjaL-S0NLsisoluiZM3NmxCqMTwVwvTI8IJRs7g",
        "1FAIpQLSfW1V0wk2NM8qEW4roz4OsGBhixEwSumAP76VlOfrRT2Q5Ndg"
    ];

    $(document).ready(function () {

        // Get UTC
        var utc = new Date().toUTCString();
        p_utc.innerHTML = `${utc}`;

        // Get user location
        var lat = 0;
        var lon = 0;
        var p_latlon = document.getElementById("latlon");
        var options = {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
        };
        function success(pos) {
            var crd = pos.coords;
            lat = crd.latitude;
            lon = crd.longitude;
            p_lat.innerHTML = `Latitude : ${crd.latitude}`;
            p_lon.innerHTML = `Longitude: ${crd.longitude}`;

            // Set the poll url
            var iframe_poll = document.getElementById("iframe_poll");

            // TODO: Add actual latlon rules
            if (lon < 0)
                iframe_poll.src = url_pre + urls[0] + url_post;
            else
                iframe_poll.src = url_pre + urls[1] + url_post;

        }
        function error(err) {
            alert(`ERROR(${err.code}): ${err.message}`);
        }
        navigator.geolocation.getCurrentPosition(success, error, options);

    });

</script>

<body>

    <div class="header">
        <h1>The Human Eye Telescope</h1>
        <p id="p_utc"></p>
        <p id="p_lat"></p>
        <p id="p_lon"></p>
    </div>

    <div class="container">
        <iframe src="" class="poll" id="iframe_poll">
            Loading...
        </iframe>
    </div>



</body>

</html>